<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Minhas Consultas</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<!-- Menu lateral -->
<div class="sidebar">
    <h2>MedDoc</h2> <div class="profile-link">
    <a href="/idoso/perfil"><i class="far fa-user-circle"></i>  Perfil</a>
</div>
    <ul>
        <li><a href="/idoso/dashboard"><i class="fas fa-home"></i> Início</a></li>
        <li><a href="/idoso/calendario"><i class="fas fa-calendar-alt"></i> Calendário</a></li>
        <li><a href="/idoso/chat"><i class="fas fa-comments"></i> Chat</a></li>
        <li><a href="/idoso/medicamentos"><i class="fas fa-pills"></i> Medicamentos</a></li>
        <li><a href="/idoso/consultas"><i class="fas fa-stethoscope"></i> Consultas</a></li>
        <li><a href="/notificacoes"><i class="fas fa-bell"></i> Notificações</a></li>
        <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
    </ul>

</div>
        <!-- Conteúdo principal -->
        <main class="main-content">
            <div class="consultas-header">
                <div>
                    <h1 class="consultas-titulo">Minhas Consultas</h1>
                    <p class="consultas-subtitulo">Consultas e exames enviados pelo seu médico</p>
                </div>
                <div>
                    <select id="consultas-filtro" class="consultas-filtro">
                        <option value="todas">Todas as consultas</option>
                        <option value="pendentes">Pendentes</option>
                        <option value="confirmadas">Confirmadas</option>
                        <option value="exames">Exames</option>
                    </select>
                </div>
            </div>
            <div class="consultas-lista">
                <!-- Exemplo de iteração Thymeleaf -->
                <div class="consultas-cartao" th:each="evento : ${eventos}">
                    <div class="consultas-cartao-cabecalho">
                        <div class="consultas-icone-tipo" th:classappend="${evento.tipo == 'Consulta'} ? 'consulta' : 'exame'">
                            <i class="fa-solid fa-stethoscope" th:if="${evento.tipo == 'Consulta'}"></i>
                            <i class="fa-solid fa-vial" th:if="${evento.tipo == 'Exame'}"></i>
                        </div>
                        <div>
                            <span class="consultas-cartao-titulo" th:text="${evento.titulo}"></span>
                            <span class="consultas-status" th:text="${evento.status}"></span>
                        </div>
                    </div>
                    <div class="consultas-cartao-detalhes">
                        <div>
                            <span><i class="fa-solid fa-user-doctor"></i> <b th:text="${evento.medico.nome}"></b> <span th:text="${evento.tipo == 'Consulta' ? evento.especialidade : evento.tipoDeExame}"></span></span>
                            <span><i class="fa-regular fa-calendar"></i> <span th:text="${#temporals.format(evento.data, 'dd/MM/yyyy')}"></span></span>
                            <span><i class="fa-regular fa-clock"></i> <span th:text="${#temporals.format(evento.hora, 'HH:mm')}"></span></span>
                        </div>
                        <div class="consultas-local-contato">
                            <b>Local e Contato</b>
                            <div>
                                <span><i class="fa-solid fa-hospital"></i> <span th:text="${evento.local}"></span></span>
                                <span><i class="fa-solid fa-phone"></i> <span th:text="${evento.contato}"></span></span>
                            </div>
                        </div>
                    </div>
                    <div class="consultas-acoes">
                       
                        <form th:action="@{'/consultas/' + ${evento.id} + '/confirmar'}" method="post">
                            <button type="submit" class="consultas-btn consultas-btn-confirmar"><i class="fa-solid fa-check"></i> Confirmar Presença</button>
                        </form>
                        <form th:action="@{'/consultas/' + ${evento.id} + '/reagendar'}" method="post">
                            <button type="submit" class="consultas-btn consultas-btn-reagendar"><i class="fa-solid fa-calendar-days"></i> Solicitar Reagendamento</button>
                        </form>
                        <form th:action="@{'/consultas/' + ${evento.id} + '/desmarcar'}" method="post">
                            <button type="submit" class="consultas-btn consultas-btn-desmarcar"><i class="fa-solid fa-xmark"></i> Não Posso Comparecer</button>
                        </form>
                        <form th:action="@{'/consultas/' + ${evento.id} + '/notificacao'}" method="post">
                            <button type="submit" class="consultas-btn consultas-btn-notificacao"><i class="fa-solid fa-bell"></i> Notificação Ativa</button>
                        </form> 
                    </div>
                </div>
             <!-- Fim da iteração -->
            </div>
        </main>
    </div>
    <script src="/js/consultas.js"></script>
</body>
</html>